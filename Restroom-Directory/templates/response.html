<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Icon Library-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .checked {
            color: orange;
        }
        .features {
            background-color: rgb(237, 232, 220);
            color: black;
            border: 2px solid black;
            margin: 30px;
            border-radius: 8px;
            padding: 10px;
        }
         body, html {
         height: 70%;
         margin: 0;
         font-family: Arial, Helvetica, sans-serif;
        }
        .building-image {
        background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("https://lh3.googleusercontent.com/gps-cs-s/AC9h4nqokc4KP4ULSQyPWoLZ6LyXqKVe02bCNZmSpZnppir94x8nLlEaDpIbHZFn3bS6EaaR8puw1a9AYcufj0t58FnzakQkwh5BJbcRJsPe4BvXL92Psf3LWSH1S9p7gYPCzGAKP2yoUA=s1360-w1360-h1020-rw");
        height: 70%;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        position: relative;
        }
        .building-text {
        text-align: left;
        position: absolute;
        top: 50%;
        left: 20%;
        transform: translate(-50%, -50%);
        color: white;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: black;
        }
        
        .review-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 30px;
        }
        
        .review-btn:hover {
            background-color: #45a049;
        }
        
        .modal-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .star-rating {
            font-size: 24px;
            margin: 10px 0;
        }
        
        .star-rating .fa-star {
            color: #ddd;
            cursor: pointer;
            margin-right: 5px;
        }
        
        .star-rating .fa-star.selected {
            color: orange;
        }
        
        .checkbox-group {
            margin: 10px 0;
        }
        
        .checkbox-group label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }
        
        .checkbox-group input[type="checkbox"] {
            margin-right: 8px;
        }
        
        .submit-review {
            background-color: #2196F3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 20px;
        }
        
        .submit-review:hover {
            background-color: #1976D2;
        }
    </style>
</head>
<body style= "background-color:rgb(193, 207, 161);">
    <div class="building-image">
        <div class="building-text">
            <h1 style="font-size:36px">🏫 {{ name }}</h1>
            <p>📍
            {% if floor == -1 %}
                Ground
            {% else %}
                Floor {{ floor }}
            {% endif %}
            </p>
        </div>
    </div>
    
    <!-- Add Review Button -->
    <button class="review-btn" onclick="openModal()">Add Your Review</button>
      
    <div class="features">
        <h2> ♿️ Accessibility </h2>
        <ul>
            {% if wheelchair %}
                <li> ♿️ Wheelchair Access </li>
            <!-- {% if baby %}
                <li> 👩‍🍼 Baby Station </li>
            {% endif %} -->
            {% elif menstrual %}
                <li> 🩸 Menstrual Products </li>
            {% else %}
                <li> No accessibility rating available. </li>
            {% endif %}
            <!-- {% if braille %}
                <li> 👁️ Braille Signage </li>
            {% endif %} -->
        </ul>
    </div>

    <div class="features">
        <div class="card"></div>
        <h2> 🧼 Cleanliness </h2>
        {% if avg_clean %}
            {% for _ in range(avg_clean) %}
                <span class="fa fa-star fa-2x checked"></span>
            {% endfor %}
            {% for _ in range(5 - avg_clean) %}
                <span class="fa fa-star fa-2x"></span>
            {% endfor %}
        {% else %}
            <p>No cleanliness rating available.</p>
        {% endif %}
    </div>

    <div class="features">
        <h2> 🏷️ Amenities </h2>
        <ul>
            <li> 🔌 Outlet </li>
            <li> 💨 Hand Dryer </li>
            <li> 🧻 Paper Towels </li>
            <li> 🪞 Full Length Mirror </li>
            <li> 🧻 Toilet Liner </li>
            <li> 🪝 Door Hooks </li>
            <li> 🌷 Air Freshener </li>
        </ul>
    </div>

    <!-- Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Rate This Location</h2>
            
            <!-- Accessibility Section -->
            <div class="modal-section">
                <h3>♿️ Accessibility</h3>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="accessibility" value="wheelchair"> ♿️ Wheelchair Access</label>
                    <label><input type="checkbox" name="accessibility" value="baby-station"> 👩‍🍼 Baby Station</label>
                    <label><input type="checkbox" name="accessibility" value="menstrual"> 🩸 Menstrual Products</label>
                    <label><input type="checkbox" name="accessibility" value="braille"> 👁️ Braille Signage</label>
                </div>
            </div>
            
            <!-- Cleanliness Section -->
            <div class="modal-section">
                <h3>🧼 Cleanliness</h3>
                <div class="star-rating" id="cleanlinessRating">
                    <span class="fa fa-star" onclick="setRating(1)"></span>
                    <span class="fa fa-star" onclick="setRating(2)"></span>
                    <span class="fa fa-star" onclick="setRating(3)"></span>
                    <span class="fa fa-star" onclick="setRating(4)"></span>
                    <span class="fa fa-star" onclick="setRating(5)"></span>
                </div>
            </div>
            
            <!-- Amenities Section -->
            <div class="modal-section">
                <h3>🏷️ Amenities</h3>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="amenities" value="outlet"> 🔌 Outlet</label>
                    <label><input type="checkbox" name="amenities" value="hand-dryer"> 💨 Hand Dryer</label>
                    <label><input type="checkbox" name="amenities" value="paper-towels"> 🧻 Paper Towels</label>
                    <label><input type="checkbox" name="amenities" value="mirror"> 🪞 Full Length Mirror</label>
                    <label><input type="checkbox" name="amenities" value="toilet-liner"> 🧻 Toilet Liner</label>
                    <label><input type="checkbox" name="amenities" value="door-hooks"> 🪝 Door Hooks</label>
                    <label><input type="checkbox" name="amenities" value="air-freshener"> 🌷 Air Freshener</label>
                </div>
            </div>
            
            <button class="submit-review" onclick="submitReview()">Submit Review</button>
        </div>
    </div>

    <script>
        let currentRating = 0;
        
        function openModal() {
            document.getElementById('reviewModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('reviewModal').style.display = 'none';
        }
        
        function setRating(rating) {
            currentRating = rating;
            const stars = document.querySelectorAll('#cleanlinessRating .fa-star');
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('selected');
                } else {
                    star.classList.remove('selected');
                }
            });
        }
        
        function submitReview() {
            // Get accessibility selections
            const accessibility = [];
            document.querySelectorAll('input[name="accessibility"]:checked').forEach(checkbox => {
                accessibility.push(checkbox.value);
            });
            
            // Get amenities selections
            const amenities = [];
            document.querySelectorAll('input[name="amenities"]:checked').forEach(checkbox => {
                amenities.push(checkbox.value);
            });
            
            // Create review object
            const review = {
                accessibility: accessibility,
                cleanliness: currentRating,
                amenities: amenities
            };
            
            alert('Review submitted! Thank you for your feedback.\n\n' + 
                  'Accessibility: ' + accessibility.join(', ') + '\n' +
                  'Cleanliness: ' + currentRating + ' stars\n' +
                  'Amenities: ' + amenities.join(', '));
            
            closeModal();
            resetForm();
        }
        
        function resetForm() {
            // Reset checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Reset star rating
            currentRating = 0;
            document.querySelectorAll('#cleanlinessRating .fa-star').forEach(star => {
                star.classList.remove('selected');
            });
        }
        
        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('reviewModal');
            if (event.target == modal) {
                closeModal();
            }
        }
    </script>
    
</body>
</html>